function Snake(){this._init();this._creatMap();this._drawSnake();this._moveSnake();this._eggFood();this._bindEvent()}Snake.prototype={_init:function(){this.score=document.querySelector(".score");this.scoreNum=document.querySelector(".scoreNum");this.wall=document.querySelector(".wall");this.scoreNums=0;this.cols=20;this.rows=9;this.snakeLen=3;this.direction="right";this.snakeBody=[];this.eggX=0;this.eggY=0},_boxTip:function(){var box=document.createElement("div");box.className="boxTip";box.innerHTML="Game Over!";document.body.appendChild(box)},_creatMap:function(){this.snakeArray=[];for(var i=0;i<this.rows;i++){var rowDiv=document.createElement("ul");var rowArray=[];for(var j=0;j<this.cols;j++){var colDiv=document.createElement("li");colDiv.className="col";rowArray.push(colDiv);rowDiv.appendChild(colDiv)}this.snakeArray.push(rowArray);this.wall.appendChild(rowDiv)}},_drawSnake:function(){for(var i=0;i<this.snakeLen;i++){this.snakeArray[0][i].className="col snake";this.snakeBody.push(this.snakeArray[0][i])}},_moveSnake:function(){var _this=this;var x=2,y=0;var timer=setInterval(function(){switch(_this.direction){case"right":x++;break;case"left":x--;break;case"up":y--;break;case"down":y++;break}if(x<0||x>_this.cols-1||y<0||y>_this.rows){_this._boxTip();clearInterval(timer);return}for(var i=0;i<_this.snakeBody.length;i++){if(_this.snakeBody[i]==_this.snakeArray[y][x]){_this._boxTip();clearInterval(timer);return}}if(_this.eggX==x&&_this.eggY==y){_this.snakeArray[_this.eggY][_this.eggX].className="col snake";_this.snakeBody.push(_this.snakeArray[_this.eggY][_this.eggX]);_this.scoreNums++;_this.scoreNum.innerHTML=_this.scoreNums;_this._eggFood()}else{_this.snakeBody[0].className="col";_this.snakeBody.shift();_this.snakeArray[y][x].className="col snake";_this.snakeBody.push(_this.snakeArray[y][x])}},400)},_eggFood:function(){this.eggX=Math.floor(Math.random()*this.cols);this.eggY=Math.floor(Math.random()*this.rows);if(this.snakeArray[this.eggY][this.eggX].className=="col snake"){this._eggFood()}else{this.snakeArray[this.eggY][this.eggX].className="col egg"}},_bindEvent:function(){var _this=this;window.onkeydown=function(event){event=event||window.event;if((_this.direction=="right"&&event.keyCode=="37")||(_this.direction=="left"&&event.keyCode=="39")||(_this.direction=="up"&&event.keyCode=="40")||(_this.direction=="down"&&event.keyCode=="38")){return}switch(event.keyCode){case 37:_this.direction="left";break;case 39:_this.direction="right";break;case 38:_this.direction="up";break;case 40:_this.direction="down";break}}}};